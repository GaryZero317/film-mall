<!--pages/user/index.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯ -->
  <view class="user-info">
    <block wx:if="{{isLogin}}">
      <image class="avatar" src="{{userInfo.avatar || '/assets/images/default-avatar.png'}}" mode="aspectFill"></image>
      <view class="info">
        <text class="nickname">{{userInfo.name}}</text>
        <view class="mobile">
          <text class="icon-mobile">ğŸ“±</text>
          <text>{{userInfo.mobile}}</text>
        </view>
      </view>
    </block>
    <block wx:else>
      <image class="avatar" src="/assets/images/default-avatar.jpeg" mode="aspectFill"></image>
      <view class="info" bindtap="onLogin">
        <text class="login-btn">ç‚¹å‡»ç™»å½•</text>
      </view>
    </block>
  </view>

  <!-- æˆ‘çš„è®¢å• -->
  <view class="order-section">
    <view class="section-header" bindtap="onViewAllOrders">
      <text>æˆ‘çš„è®¢å•</text>
      <view class="more">æŸ¥çœ‹å…¨éƒ¨<text class="icon-arrow">ã€‰</text></view>
    </view>
    <view class="order-types">
      <view class="type-item" bindtap="onViewOrders" data-type="unpaid">
        <image src="/assets/images/unpaid.png"></image>
        <text>å¾…ä»˜æ¬¾</text>
        <text class="badge" wx:if="{{orderCount.unpaid > 0}}">{{orderCount.unpaid}}</text>
      </view>
      <view class="type-item" bindtap="onViewOrders" data-type="undelivered">
        <image src="/assets/images/undelivered.png"></image>
        <text>å¾…å‘è´§</text>
        <text class="badge" wx:if="{{orderCount.undelivered > 0}}">{{orderCount.undelivered}}</text>
      </view>
      <view class="type-item" bindtap="onViewOrders" data-type="delivered">
        <image src="/assets/images/delivered.png"></image>
        <text>å¾…æ”¶è´§</text>
        <text class="badge" wx:if="{{orderCount.delivered > 0}}">{{orderCount.delivered}}</text>
      </view>
      <view class="type-item" bindtap="onViewOrders" data-type="completed">
        <image src="/assets/images/completed.png"></image>
        <text>å·²å®Œæˆ</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½åˆ—è¡¨ -->
  <view class="menu-list">
    <view class="menu-item" bindtap="onViewAddress">
      <view class="menu-icon address-icon">
        <image src="/assets/images/address.png"></image>
      </view>
      <text>æ”¶è´§åœ°å€</text>
      <image class="arrow" src="/assets/images/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="onViewFavorites">
      <view class="menu-icon favorite-icon">
        <image src="/assets/images/favorite.png"></image>
      </view>
      <text>æˆ‘çš„æ”¶è—</text>
      <image class="arrow" src="/assets/images/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="onViewFilmOrders">
      <view class="menu-icon film-icon">
        <image src="/assets/images/film.png"></image>
      </view>
      <text>èƒ¶ç‰‡å†²æ´—</text>
      <image class="arrow" src="/assets/images/arrow-right.png"></image>
    </view>
    <view class="menu-item" bindtap="onViewSettings">
      <view class="menu-icon settings-icon">
        <image src="/assets/images/settings.png"></image>
      </view>
      <text>è®¾ç½®</text>
      <image class="arrow" src="/assets/images/arrow-right.png"></image>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-btn" bindtap="onLogout" wx:if="{{isLogin}}">
    <text>é€€å‡ºç™»å½•</text>
  </view>
</view>