<!--pages/user/service/index.wxml-->
<view class="container">
  <view class="header">
    <image class="logo" src="/assets/images/logo.png" mode="aspectFit"></image>
    <text class="title">客服中心</text>
  </view>

  <view class="content">
    <view class="service-card">
      <view class="card-title">联系我们</view>
      <view class="contact-item" bindtap="callService">
        <view class="icon">📞</view>
        <view class="info">
          <text class="label">客服电话</text>
          <text class="value">400-123-4567</text>
        </view>
      </view>
      <view class="contact-item">
        <view class="icon">📧</view>
        <view class="info">
          <text class="label">客服邮箱</text>
          <text class="value">service@filmmall.com</text>
        </view>
      </view>
      <view class="contact-item">
        <view class="icon">🕙</view>
        <view class="info">
          <text class="label">服务时间</text>
          <text class="value">周一至周日 9:00-18:00</text>
        </view>
      </view>
    </view>

    <view class="service-card">
      <view class="card-title">常见问题</view>
      <view class="faq-list" wx:if="{{!loading}}">
        <block wx:if="{{faqList.length > 0}}">
          <view class="faq-item" wx:for="{{faqList}}" wx:key="id" bindtap="toggleFaq" data-index="{{index}}">
            <view class="faq-question">
              <text>{{item.question}}</text>
              <text class="arrow {{faqOpen[index] ? 'open' : ''}}">〉</text>
            </view>
            <view class="faq-answer {{faqOpen[index] ? 'show' : ''}}">
              {{item.answer}}
            </view>
          </view>
        </block>
        <view wx:else class="empty-tip">暂无常见问题</view>
      </view>
      <view class="loading" wx:else>加载中...</view>
    </view>

    <!-- 问题提交入口 -->
    <view class="question-entry">
      <button class="contact-btn" bindtap="showSubmitForm">提交问题</button>
      <button class="contact-btn chat-btn" bindtap="goToChat">在线聊天</button>
    </view>

    <!-- 问题提交弹窗 -->
    <view class="question-modal" wx:if="{{showSubmitForm}}">
      <view class="modal-mask" bindtap="hideSubmitForm"></view>
      <view class="modal-content">
        <view class="modal-header">
          <text class="modal-title">提交问题</text>
          <text class="modal-close" bindtap="hideSubmitForm">×</text>
        </view>
        <view class="modal-body">
          <view class="form-item">
            <text class="form-label">问题类型</text>
            <radio-group class="type-group" bindchange="onTypeChange">
              <label class="type-item">
                <radio value="1" checked="{{questionType === 1}}" />产品咨询
              </label>
              <label class="type-item">
                <radio value="2" checked="{{questionType === 2}}" />订单问题
              </label>
              <label class="type-item">
                <radio value="3" checked="{{questionType === 3}}" />售后服务
              </label>
              <label class="type-item">
                <radio value="4" checked="{{questionType === 4}}" />其他问题
              </label>
            </radio-group>
          </view>
          <view class="form-item">
            <text class="form-label">问题描述</text>
            <textarea 
              class="question-textarea" 
              placeholder="请详细描述您的问题..." 
              value="{{questionContent}}"
              bindinput="onContentInput"
            ></textarea>
          </view>
        </view>
        <view class="modal-footer">
          <button class="cancel-btn" bindtap="hideSubmitForm">取消</button>
          <button class="submit-btn" bindtap="submitQuestion">提交</button>
        </view>
      </view>
    </view>
  </view>
</view> 