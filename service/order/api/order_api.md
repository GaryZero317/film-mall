# 订单服务API文档

## 错误码说明

### 基础错误码
| 错误码 | 说明 |
|-------|-----|
| 0 | 成功 |
| 1001 | 服务器内部错误 |
| 1002 | 参数错误 |

### 业务错误码 (2000-2999)
| 错误码 | 说明 |
|-------|-----|
| 2001 | 订单不存在 |
| 2002 | 创建订单失败 |
| 2003 | 更新订单失败 |
| 2004 | 删除订单失败 |
| 2005 | 订单状态无效 |
| 2006 | 创建订单商品失败 |
| 2007 | 订单商品不存在 |
| 2008 | 更新订单商品失败 |
| 2009 | 删除订单商品失败 |
| 2010 | 收货地址不存在 |
| 2011 | 用户不存在 |
| 2012 | 商品不存在 |
| 2013 | 商品库存不足 |
| 2014 | 订单金额无效 |
| 2015 | 订单状态不允许支付 |

## 接口规范

### 通用响应格式
```json
{
    "code": 0,        // 错误码，0表示成功，非0表示失败
    "msg": "success", // 错误信息
    "data": {}        // 响应数据，可能为null
}
```

### 订单状态说明
| 状态码 | 说明 |
|-------|-----|
| 0 | 待付款 |
| 1 | 待发货 |
| 2 | 待收货 |
| 3 | 已完成 |
| 4 | 已取消 |

### 接口列表

#### 1. 创建订单
- 请求路径：`POST /api/order/create`
- 请求参数：
```json
{
    "uid": 1,           // 用户ID
    "addressId": 1,     // 收货地址ID
    "totalPrice": 100,  // 订单总价(分)
    "shippingFee": 0,   // 运费(分)
    "remark": "",       // 订单备注
    "items": [          // 订单商品列表
        {
            "pid": 1,           // 商品ID
            "productName": "",  // 商品名称
            "productImage": "", // 商品图片
            "price": 100,       // 商品单价(分)
            "quantity": 1,      // 购买数量
            "amount": 100       // 商品总价(分)
        }
    ]
}
```
- 响应数据：
```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "id": 1,    // 订单ID
        "oid": ""   // 订单号
    }
}
```

#### 2. 更新订单
- 请求路径：`POST /api/order/update`
- 请求参数：
```json
{
    "id": 1,      // 订单ID
    "status": 1   // 订单状态
}
```
- 响应数据：
```json
{
    "code": 0,
    "msg": "success"
}
```

#### 3. 获取订单详情
- 请求路径：`POST /api/order/get`
- 请求参数：
```json
{
    "id": 1  // 订单ID
}
```
- 响应数据：
```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "id": 1,            // 订单ID
        "oid": "",         // 订单号
        "uid": 1,          // 用户ID
        "addressId": 1,    // 收货地址ID
        "totalPrice": 100, // 订单总价(分)
        "shippingFee": 0,  // 运费(分)
        "status": 0,       // 订单状态
        "statusDesc": "",  // 状态描述
        "remark": "",      // 订单备注
        "items": [         // 订单商品列表
            {
                "id": 1,           // 订单商品ID
                "orderId": 1,      // 订单ID
                "pid": 1,          // 商品ID
                "productName": "", // 商品名称
                "productImage": "",// 商品图片
                "price": 100,      // 商品单价(分)
                "quantity": 1,     // 购买数量
                "amount": 100      // 商品总价(分)
            }
        ],
        "createTime": "",  // 创建时间
        "updateTime": ""   // 更新时间
    }
}
```

#### 4. 获取订单列表
- 请求路径：`POST /api/order/list`
- 请求参数：
```json
{
    "uid": 1,        // 用户ID
    "status": 0,     // 订单状态，可选
    "page": 1,       // 页码，默认1
    "pageSize": 10   // 每页数量，默认10
}
```
- 响应数据：
```json
{
    "code": 0,
    "msg": "success",
    "data": {
        "total": 100,  // 总数
        "list": []     // 订单列表，格式同订单详情
    }
}
```

## 注意事项
1. 所有金额单位均为分
2. 时间格式统一使用ISO8601格式
3. 分页参数page从1开始
4. 接口调用需要携带token进行身份验证 